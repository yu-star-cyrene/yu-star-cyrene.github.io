<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <title>ç™½ç™½æ¯›æ¯›</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/_custom.css">
<meta name="generator" content="Hexo 8.1.1"></head>
<body class="bg-post">

<div class="sidebar">
    <div class="header-info">
        <a href="/"><img src="/images/avatar.jpg" class="avatar"></a>
        <div class="site-author">ç™½ç™½æ¯›æ¯›</div>
    </div>
    <nav class="nav">
        <a href="/">é¦–é¡µ</a>
        <a href="/categories">åˆ†ç±»</a>
        <a href="/archives">æ‰€æœ‰</a>
    </nav>
    <div class="contact-section">
        <p>If you want find me:</p>
        <div class="contact-item"><img src="/images/qq.png"> 729626523</div>
        <div class="contact-item"><img src="/images/GitHub.png"> yu-star-cyrene</div>
        <div class="contact-item"><img src="/images/email.jpg"> y19350026593</div>
    </div>
</div>

<div class="content-area">
    
<div style="height: 60px;"></div>
<div class="content-wrapper">
    <article class="post-article">
        <h1 style="text-align: center; font-size: 2.2em; margin-bottom: 20px;">ArnoldçŒ«è„¸å˜æ¢å’Œzigzag</h1>
        
        <div style="text-align: center; color: #999; margin-bottom: 40px; border-bottom: 1px solid #eee; padding-bottom: 20px; font-size: 0.9em;">
            <span>ğŸ“… å‘å¸ƒ: 2025-12-11</span>
            <span style="margin: 0 15px;">|</span>
            <span style="color: #007bff; font-weight: bold;">ğŸ“ æ›´æ–°: 2025-12-29</span>
            
            
             <span style="margin: 0 15px;">|</span>
             ğŸ“‚ çŸ¥è¯†ç‚¹
            
        </div>
        
        <div class="article-content">
            <h1 id="ArnoldçŒ«è„¸å˜æ¢å’Œzigzag"><a href="#ArnoldçŒ«è„¸å˜æ¢å’Œzigzag" class="headerlink" title="#ArnoldçŒ«è„¸å˜æ¢å’Œzigzag"></a>#ArnoldçŒ«è„¸å˜æ¢å’Œzigzag</h1><p><img src="/images/QQ20251211-200341.png" alt="alt text"></p>
<p>è‡´æ•¬ä¼ å¥‡é¢˜å‹miscã€‚</p>
<hr>
<p>å¤ªæäº†ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çœ‹è§è¿™ä¸€é¢˜ï¼Œæˆ‘å°±ç›´æ¥ä¸Šç½‘å»æœç´¢äº†ï¼Œç„¶åæ‰¾åˆ°ä¸€ä¸ª<strong>ArnoldçŒ«è„¸å˜æ¢</strong>ã€‚</p>
<p>æˆ‘è¿˜çœŸä»¥ä¸ºæ˜¯è¿™ç§åŠ å¯†æ–¹å¼ï¼Œç„¶åå°±ç…§ç€åšäº†åšï¼Œç»“æœå½“ç„¶æ˜¯æ²¡æœ‰åšå‡ºæ¥çš„ã€‚</p>
<p>ä¸è¿‡ä¹Ÿç®—æ˜¯æå‰çœ‹åˆ°ä¸€ä¸ªæˆ‘ç¬¬ä¸€æ¬¡è§ç»å¯¹ä¸ä¼šåšçš„é¢˜å‹äº†ã€‚</p>
<p>çŒ«è„¸åŠ å¯†ï¼Œä¿è¯åŸå›¾çš„åƒç´ ç‚¹ä¸å˜ï¼Œç„¶åå‡è®¾ä¸€ä¸ªåƒç´ ç‚¹çš„ä½ç½®æŒ‰åæ ‡(x,y)ï¼Œç„¶åè½¬åŒ–åè¾¹ä¸ºï¼Œè¿™è¾¹ç»™å‡ºå…¬å¼ x1&#x3D;(x+y) mod Nï¼Œy1&#x3D;(x+2y) mod N ã€‚</p>
<p>åæ¨å¾—åˆ° x&#x3D;(2x1-y1) mod Nï¼Œy&#x3D;(-x1+y) mod Nã€‚</p>
<p>è¯¥åŠ å¯†å…·æœ‰å‘¨æœŸæ€§ï¼Œå³å¦‚æœä¸æ–­æŒ‰å…¬å¼å˜åŒ–åŸå›¾ï¼Œåˆ™åœ¨å˜åŒ–ä¸€å®šæ¬¡æ•°åä¼šå›åˆ°åŸæ¥çš„æ ·å­ã€‚</p>
<p>è§£å¯†å…¬å¼ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">def arnold_transform(img, steps=1, encrypt=True):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    æ‰§è¡ŒArnoldå˜æ¢ (åŠ å¯† æˆ– è§£å¯†)</span><br><span class="line">    :param img: è¾“å…¥çš„å›¾åƒæ•°ç»„ (numpy array)</span><br><span class="line">    :param steps: è¿­ä»£æ¬¡æ•° (å¯†é’¥ä¹‹ä¸€)</span><br><span class="line">    :param encrypt: Trueä¸ºåŠ å¯†(æ­£å‘), Falseä¸ºè§£å¯†(é€†å‘)</span><br><span class="line">    :return: å˜æ¢åçš„å›¾åƒ</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    h, w = img.shape[:2]</span><br><span class="line">    </span><br><span class="line">    # Arnoldå˜æ¢é€šå¸¸è¦æ±‚å›¾åƒæ˜¯æ­£æ–¹å½¢</span><br><span class="line">    # å¦‚æœä¸æ˜¯æ­£æ–¹å½¢ï¼Œé€šå¸¸çš„åšæ³•æ˜¯è£å‰ªæˆæ­£æ–¹å½¢æˆ–åªå¤„ç†æ­£æ–¹å½¢åŒºåŸŸ</span><br><span class="line">    # è¿™é‡Œä¸ºäº†æ¼”ç¤ºç®€å•ï¼Œæˆ‘ä»¬å–æœ€å°è¾¹é•¿è¿›è¡Œè£å‰ª</span><br><span class="line">    N = min(h, w)</span><br><span class="line">    img = img[:N, :N]</span><br><span class="line">    </span><br><span class="line">    # åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾åƒç”¨äºå­˜æ”¾ç»“æœ</span><br><span class="line">    new_img = np.zeros((N, N, img.shape[2]), dtype=np.uint8)</span><br><span class="line">    </span><br><span class="line">    # ç”Ÿæˆåæ ‡ç½‘æ ¼</span><br><span class="line">    x, y = np.meshgrid(np.arange(N), np.arange(N))</span><br><span class="line">    </span><br><span class="line">    # å¤åˆ¶åæ ‡ä»¥è¿›è¡Œè¿­ä»£</span><br><span class="line">    new_x, new_y = x.copy(), y.copy()</span><br><span class="line">    </span><br><span class="line">    # æ ¸å¿ƒç®—æ³•</span><br><span class="line">    for _ in range(steps):</span><br><span class="line">        if encrypt:</span><br><span class="line">            # æ­£å‘å˜æ¢ (åŠ å¯†)</span><br><span class="line">            # x&#x27; = (x + y) % N</span><br><span class="line">            # y&#x27; = (x + 2y) % N</span><br><span class="line">            next_x = (new_x + new_y) % N</span><br><span class="line">            next_y = (new_x + 2 * new_y) % N</span><br><span class="line">        else:</span><br><span class="line">            # é€†å‘å˜æ¢ (è§£å¯†)</span><br><span class="line">            # x = (2x&#x27; - y&#x27;) % N</span><br><span class="line">            # y = (-x&#x27; + y&#x27;) % N</span><br><span class="line">            next_x = (2 * new_x - new_y) % N</span><br><span class="line">            next_y = (-new_x + new_y) % N</span><br><span class="line">        </span><br><span class="line">        new_x, new_y = next_x, next_y</span><br><span class="line"></span><br><span class="line">    # è¿™é‡Œçš„ new_x, new_y æ˜¯åŸå›¾åæ ‡å˜æ¢åçš„ç›®æ ‡åæ ‡</span><br><span class="line">    # ä½†åœ¨NumPyèµ‹å€¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åè¿‡æ¥æ€è€ƒï¼š</span><br><span class="line">    # æˆ‘ä»¬å¸Œæœ› new_img[new_y, new_x] = img[y, x] (æ­£å‘é€»è¾‘)</span><br><span class="line">    # æˆ–è€…ç”¨æ›´é«˜æ•ˆçš„æ©ç èµ‹å€¼æ–¹å¼</span><br><span class="line">    </span><br><span class="line">    # æ³¨æ„ï¼šä¸ºäº†ä¿æŒå‘é‡åŒ–æ“ä½œçš„ç›´è§‚æ€§ï¼Œè¿™é‡Œç›´æ¥åˆ©ç”¨æ˜ å°„å…³ç³»</span><br><span class="line">    # å®é™…ä¸Šï¼Œä¸Šé¢çš„è®¡ç®—ç®—å‡ºäº† (x,y) ç§»åŠ¨åˆ°äº† (new_x, new_y)</span><br><span class="line">    # æ‰€ä»¥ img[y, x] çš„åƒç´ å€¼åº”è¯¥å¡«å…¥ new_img[new_y, new_x]</span><br><span class="line">    new_img[new_y, new_x] = img[y, x]</span><br><span class="line">    </span><br><span class="line">    return new_img</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    # 1. å‡†å¤‡æµ‹è¯•å›¾åƒ</span><br><span class="line">    # å¦‚æœä½ æ²¡æœ‰å›¾ç‰‡ï¼Œä»£ç ä¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•å›¾</span><br><span class="line">    filename = &#x27;test_arnold.png&#x27;</span><br><span class="line">    if not os.path.exists(filename):</span><br><span class="line">        print(&quot;æœªæ‰¾åˆ°å›¾ç‰‡ï¼Œç”Ÿæˆæµ‹è¯•å›¾ç‰‡...&quot;)</span><br><span class="line">        test_img = np.zeros((300, 300, 3), dtype=np.uint8)</span><br><span class="line">        cv2.putText(test_img, &quot;HELLO CTF&quot;, (50, 150), cv2.FONT_HERSHEY_SIMPLEX, 1.5, (255, 255, 255), 3)</span><br><span class="line">        cv2.imwrite(filename, test_img)</span><br><span class="line">    </span><br><span class="line">    original_img = cv2.imread(filename)</span><br><span class="line">    </span><br><span class="line">    # 2. è®¾ç½®å¯†é’¥ (è¿­ä»£æ¬¡æ•°)</span><br><span class="line">    KEY_STEPS = 10</span><br><span class="line">    </span><br><span class="line">    print(f&quot;åŸå§‹å›¾åƒå°ºå¯¸: &#123;original_img.shape&#125;&quot;)</span><br><span class="line">    print(f&quot;æ­£åœ¨è¿›è¡ŒArnoldåŠ å¯† (è¿­ä»£ &#123;KEY_STEPS&#125; æ¬¡)...&quot;)</span><br><span class="line">    </span><br><span class="line">    # 3. åŠ å¯†</span><br><span class="line">    encrypted_img = arnold_transform(original_img, steps=KEY_STEPS, encrypt=True)</span><br><span class="line">    cv2.imwrite(&#x27;arnold_encrypted.png&#x27;, encrypted_img)</span><br><span class="line">    print(&quot;åŠ å¯†å®Œæˆï¼Œå·²ä¿å­˜ä¸º arnold_encrypted.png&quot;)</span><br><span class="line">    </span><br><span class="line">    # 4. è§£å¯†</span><br><span class="line">    print(f&quot;æ­£åœ¨è¿›è¡ŒArnoldè§£å¯† (è¿­ä»£ &#123;KEY_STEPS&#125; æ¬¡)...&quot;)</span><br><span class="line">    decrypted_img = arnold_transform(encrypted_img, steps=KEY_STEPS, encrypt=False)</span><br><span class="line">    cv2.imwrite(&#x27;arnold_decrypted.png&#x27;, decrypted_img)</span><br><span class="line">    print(&quot;è§£å¯†å®Œæˆï¼Œå·²ä¿å­˜ä¸º arnold_decrypted.png&quot;)</span><br><span class="line"></span><br><span class="line">    # (å¯é€‰) æ˜¾ç¤ºå›¾åƒ</span><br><span class="line">    # cv2.imshow(&quot;Encrypted&quot;, encrypted_img)</span><br><span class="line">    # cv2.imshow(&quot;Decrypted&quot;, decrypted_img)</span><br><span class="line">    # cv2.waitKey(0)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<p><img src="/images/QQ20251211-201753.png" alt="alt text"></p>
<p>è¯¥ç§åŠ å¯†æ–¹å¼åŒæ ·å­˜åœ¨è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<hr>
<p>æ¥ä¸‹æ¥ç™»åœºçš„æ˜¯zigzagã€‚</p>
<p>åŸé¢˜æ˜¯æœ‰æç¤ºçš„ï¼Œæ‰“å¼€010eiditorï¼Œä¼šå‘ç°æœ€åº•éƒ¨æœ‰ä¸€ä¸²å¾ˆæ˜æ˜¾çš„æ•°æ®å…­ï¼Œbase58è§£å¯†åå¾—åˆ°zigzagã€‚</p>
<p>åœ¨ISCTFå·²ç»ä¸¤æ¬¡å› ä¸ºæ²¡çœ‹å°¾éƒ¨æ²¡åšå‡ºæ¥é¢˜ç›®äº†ï¼Œå…¶å®æœ‰ä¸€é¢˜æ˜¯å·¥å…·çš„é—®é¢˜ã€‚</p>
<p><img src="/images/QQ20251211-202933.png" alt="alt text"></p>
<p>å°†åŸç†å°±æ˜¯å°†äºŒç»´æ•°ç»„æŒ‰ç…§ç‰¹å®šçš„æ–¹æ³•è¯»å–æˆä¸€ç»´æ•°ç»„åï¼Œå†æ¬¡æ’åˆ—æˆä¸ºäºŒç»´æ•°ç»„ã€‚</p>
<p>è¿™é‡Œç»™çš„æ˜¯æœ€æ ‡å‡†çš„å½¢å¼ï¼Œå­˜åœ¨å…¶ä»–å½¢å¼ã€‚</p>
<p>è§£å¯†ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">def zigzag_scan(matrix):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    å°† NxN çš„äºŒç»´çŸ©é˜µè¿›è¡Œ Zigzag æ‰«æï¼Œè½¬æ¢ä¸ºä¸€ç»´æ•°ç»„</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    rows, cols = matrix.shape</span><br><span class="line">    solution = [[] for i in range(rows + cols - 1)]</span><br><span class="line"></span><br><span class="line">    for r in range(rows):</span><br><span class="line">        for c in range(cols):</span><br><span class="line">            sum_idx = r + c</span><br><span class="line">            # å°†åŒä¸€å¯¹è§’çº¿ä¸Šçš„å…ƒç´ æ”¶é›†åˆ°åŒä¸€ä¸ªæ¡¶é‡Œ</span><br><span class="line">            if sum_idx % 2 == 0:</span><br><span class="line">                # å¶æ•°å’Œï¼šåŸæœ¬æ˜¯å‘å³ä¸Šï¼Œä½†åœ¨éå†çŸ©é˜µæ—¶ï¼Œ</span><br><span class="line">                # åŒä¸€ä¸ªsum_idxï¼Œræ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥ç›´æ¥appendå®é™…ä¸Šæ˜¯å­˜çš„åå‘</span><br><span class="line">                # å› æ­¤å¶æ•°å±‚æˆ‘ä»¬éœ€è¦ insert(0) æˆ–è€…åç»­ç»Ÿä¸€åè½¬</span><br><span class="line">                solution[sum_idx].insert(0, matrix[r][c])</span><br><span class="line">            else:</span><br><span class="line">                # å¥‡æ•°å’Œï¼šå‘å·¦ä¸‹</span><br><span class="line">                solution[sum_idx].append(matrix[r][c])</span><br><span class="line"></span><br><span class="line">    # å°†æ‰€æœ‰æ¡¶åˆå¹¶æˆä¸€ä¸ªä¸€ç»´åˆ—è¡¨</span><br><span class="line">    return [num for sublist in solution for num in sublist]</span><br><span class="line"></span><br><span class="line">def inverse_zigzag(array, h, w):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Zigzag é€†å˜æ¢ï¼šå°†ä¸€ç»´æ•°ç»„è¿˜åŸä¸º h x w çŸ©é˜µ</span><br><span class="line">    (è¿™æ˜¯è§£å¯†æ­¥éª¤å¿…é¡»çš„)</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    matrix = np.zeros((h, w), dtype=np.int32)</span><br><span class="line">    rows, cols = h, w</span><br><span class="line">    </span><br><span class="line">    # å½“å‰å¡«å……åˆ°çš„æ•°ç»„ç´¢å¼•</span><br><span class="line">    cur_idx = 0</span><br><span class="line">    </span><br><span class="line">    # éå†æ‰€æœ‰å¯¹è§’çº¿ (å’Œä¸º 0 åˆ° h+w-2)</span><br><span class="line">    for s in range(rows + cols - 1):</span><br><span class="line">        if s % 2 == 0:</span><br><span class="line">            # å¶æ•°å¯¹è§’çº¿ï¼šå‘å³ä¸Š (r å‡å°, c å¢åŠ )</span><br><span class="line">            # ç¡®å®šèµ·ç‚¹çš„ r</span><br><span class="line">            # å¦‚æœ s &lt; rows, r ä» s å¼€å§‹; å¦åˆ™ r ä» rows-1 å¼€å§‹</span><br><span class="line">            r = s if s &lt; rows else rows - 1</span><br><span class="line">            c = s - r</span><br><span class="line">            </span><br><span class="line">            while r &gt;= 0 and c &lt; cols:</span><br><span class="line">                matrix[r][c] = array[cur_idx]</span><br><span class="line">                cur_idx += 1</span><br><span class="line">                r -= 1</span><br><span class="line">                c += 1</span><br><span class="line">        else:</span><br><span class="line">            # å¥‡æ•°å¯¹è§’çº¿ï¼šå‘å·¦ä¸‹ (r å¢åŠ , c å‡å°)</span><br><span class="line">            # ç¡®å®šèµ·ç‚¹çš„ c</span><br><span class="line">            c = s if s &lt; cols else cols - 1</span><br><span class="line">            r = s - c</span><br><span class="line">            </span><br><span class="line">            while r &lt; rows and c &gt;= 0:</span><br><span class="line">                matrix[r][c] = array[cur_idx]</span><br><span class="line">                cur_idx += 1</span><br><span class="line">                r += 1</span><br><span class="line">                c -= 1</span><br><span class="line">                </span><br><span class="line">    return matrix</span><br><span class="line"></span><br><span class="line"># --- æµ‹è¯• ---</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # åˆ›å»ºä¸€ä¸ª 4x4 æµ‹è¯•çŸ©é˜µ</span><br><span class="line">    test_mat = np.array([</span><br><span class="line">        [1,  2,  5,  9],</span><br><span class="line">        [3,  6,  8,  12],</span><br><span class="line">        [4,  7,  11, 13],</span><br><span class="line">        [10, 14, 15, 16]</span><br><span class="line">    ])</span><br><span class="line">    </span><br><span class="line">    print(&quot;åŸå§‹çŸ©é˜µ:&quot;)</span><br><span class="line">    print(test_mat)</span><br><span class="line">    </span><br><span class="line">    # 1. æ‰«æ</span><br><span class="line">    zigzag_1d = zigzag_scan(test_mat)</span><br><span class="line">    print(f&quot;\nZigzag æ‰«æç»“æœ (1D): &#123;zigzag_1d&#125;&quot;)</span><br><span class="line">    # é¢„æœŸç»“æœ: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]</span><br><span class="line">    # (å¦‚æœæ˜¯ä¸Šé¢çš„çŸ©é˜µæ•°å€¼è®¾è®¡ï¼Œåˆšå¥½çš„é¡ºåºåº”è¯¥æ˜¯é€’å¢çš„ï¼Œè¿™éªŒè¯äº†è·¯å¾„æ­£ç¡®æ€§)</span><br><span class="line">    </span><br><span class="line">    # 2. é€†å˜æ¢ (è¿˜åŸ)</span><br><span class="line">    restored_mat = inverse_zigzag(zigzag_1d, 4, 4)</span><br><span class="line">    print(&quot;\nè¿˜åŸåçš„çŸ©é˜µ:&quot;)</span><br><span class="line">    print(restored_mat)</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯æ•°æ®çš„è„šæœ¬ã€‚</p>
<p>è¿™è¾¹è¿˜æœ‰ä¸€ä¸ªå›¾åƒåƒç´ ç‚¹çš„è„šæœ¬ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import cv2</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">def zigzag_indices(rows, cols):</span><br><span class="line">    # ç”Ÿæˆ Zigzag æ‰«æçš„åæ ‡åºåˆ— [cite: 41]</span><br><span class="line">    indices = []</span><br><span class="line">    # éå†æ‰€æœ‰å¯¹è§’çº¿ï¼Œæ€»æ•°ä¸º rows + cols - 1 [cite: 42]</span><br><span class="line">    for diag in range(rows + cols - 1):</span><br><span class="line">        if diag % 2 == 0:</span><br><span class="line">            # å¶æ•°å¯¹è§’çº¿ï¼šå‘å³ä¸Šæ–¹éå† [cite: 43]</span><br><span class="line">            # èµ·ç‚¹ r ä¸ºè¯¥å¯¹è§’çº¿å…è®¸çš„æœ€å¤§è¡Œç´¢å¼• [cite: 44]</span><br><span class="line">            r = min(diag, rows - 1)</span><br><span class="line">            c = diag - r</span><br><span class="line">            </span><br><span class="line">            # å½“ r æœªè¶Šä¸‹ç•Œä¸” c æœªè¶Šå³ç•Œæ—¶å¾ªç¯ [cite: 47]</span><br><span class="line">            while r &gt;= 0 and c &lt; cols:</span><br><span class="line">                indices.append((r, c)) # [cite: 50]</span><br><span class="line">                r -= 1 # [cite: 51]</span><br><span class="line">                c += 1 # [cite: 52]</span><br><span class="line">        else:</span><br><span class="line">            # å¥‡æ•°å¯¹è§’çº¿ï¼šå‘å·¦ä¸‹æ–¹éå† [cite: 48]</span><br><span class="line">            # èµ·ç‚¹ c ä¸ºè¯¥å¯¹è§’çº¿å…è®¸çš„æœ€å¤§åˆ—ç´¢å¼• [cite: 53]</span><br><span class="line">            c = min(diag, cols - 1)</span><br><span class="line">            r = diag - c</span><br><span class="line">            </span><br><span class="line">            # å½“ c æœªè¶Šå·¦ç•Œä¸” r æœªè¶Šä¸‹ç•Œæ—¶å¾ªç¯ [cite: 55]</span><br><span class="line">            while c &gt;= 0 and r &lt; rows:</span><br><span class="line">                indices.append((r, c)) # [cite: 56]</span><br><span class="line">                r += 1 # [cite: 57]</span><br><span class="line">                c -= 1 # [cite: 58]</span><br><span class="line">    return indices # [cite: 59]</span><br><span class="line"></span><br><span class="line">def zigzag_unscramble_2d(matrix_2d):</span><br><span class="line">    # é’ˆå¯¹äºŒç»´çŸ©é˜µè¿›è¡Œ Zigzag é€†å˜æ¢ [cite: 60]</span><br><span class="line">    rows, cols = matrix_2d.shape # [cite: 61]</span><br><span class="line">    indices = zigzag_indices(rows, cols) # [cite: 63]</span><br><span class="line">    </span><br><span class="line">    # å°†çŸ©é˜µå±•å¹³ï¼Œå› ä¸ºåŠ å¯†è¿‡ç¨‹æ˜¯æŒ‰ Zigzag é¡ºåºè¯»å–åçš„ä¸€ç»´æµ [cite: 64, 65]</span><br><span class="line">    flattened = matrix_2d.flatten()</span><br><span class="line">    </span><br><span class="line">    # åˆ›å»ºå…¨é›¶çŸ©é˜µç”¨äºå­˜æ”¾è¿˜åŸåçš„æ•°æ® [cite: 66]</span><br><span class="line">    unscrambled = np.zeros_like(matrix_2d)</span><br><span class="line">    </span><br><span class="line">    # å°†å±•å¹³çš„æ•°æ®æŒ‰ Zigzag è·¯å¾„å¡«å›åŸä½ [cite: 67]</span><br><span class="line">    for idx, (r, c) in enumerate(indices):</span><br><span class="line">        unscrambled[r, c] = flattened[idx]</span><br><span class="line">        </span><br><span class="line">    return unscrambled # [cite: 68]</span><br><span class="line"></span><br><span class="line">def zigzag_unscramble_image(img):</span><br><span class="line">    # åˆ¤æ–­å›¾åƒç»´åº¦å¹¶å¤„ç† [cite: 69]</span><br><span class="line">    if img.ndim == 2:</span><br><span class="line">        # ç°åº¦å›¾ç›´æ¥å¤„ç† [cite: 70]</span><br><span class="line">        return zigzag_unscramble_2d(img)</span><br><span class="line">    elif img.ndim == 3 and img.shape[2] == 3:</span><br><span class="line">        # RGB å½©è‰²å›¾å¯¹æ¯ä¸ªé€šé“åˆ†åˆ«å¤„ç† [cite: 71, 72]</span><br><span class="line">        unscrambled = np.zeros_like(img)</span><br><span class="line">        for ch in range(3):</span><br><span class="line">            unscrambled[:, :, ch] = zigzag_unscramble_2d(img[:, :, ch]) # [cite: 73]</span><br><span class="line">        return unscrambled # [cite: 74]</span><br><span class="line">    else:</span><br><span class="line">        raise ValueError(&quot;ä»…æ”¯æŒç°åº¦å›¾æˆ–æ ‡å‡† RGB å½©è‰²å›¾&quot;) # [cite: 76]</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # è®¾ç½®åŠ å¯†å›¾ç‰‡è·¯å¾„ (æ ¹æ®é¢˜ç›®æè¿°æ–‡ä»¶åä¸º enc.png) [cite: 78]</span><br><span class="line">    encrypted_image_path = &quot;enc.png&quot;</span><br><span class="line">    </span><br><span class="line">    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ [cite: 80]</span><br><span class="line">    if not os.path.exists(encrypted_image_path):</span><br><span class="line">        print(f&quot;é”™è¯¯: æ‰¾ä¸åˆ°åŠ å¯†å›¾åƒæ–‡ä»¶ &#x27;&#123;encrypted_image_path&#125;&#x27;&quot;)</span><br><span class="line">        exit(1)</span><br><span class="line">        </span><br><span class="line">    # è¯»å–å›¾åƒ [cite: 83]</span><br><span class="line">    img_bgr = cv2.imread(encrypted_image_path)</span><br><span class="line">    if img_bgr is None:</span><br><span class="line">        print(&quot;æ— æ³•è¯»å–åŠ å¯†å›¾åƒ,è¯·æ£€æŸ¥è·¯å¾„æˆ–æ ¼å¼æ˜¯å¦æ”¯æŒ&quot;)</span><br><span class="line">        exit(1)</span><br><span class="line">        </span><br><span class="line">    # OpenCV é»˜è®¤è¯»å–ä¸º BGRï¼Œéœ€è½¬æ¢ä¸º RGB è¿›è¡Œå¤„ç† [cite: 85]</span><br><span class="line">    img_rgb = cv2.cvtColor(img_bgr, cv2.COLOR_BGR2RGB)</span><br><span class="line">    print(f&quot;æˆåŠŸè¯»å–åŠ å¯†å›¾åƒ, å°ºå¯¸: &#123;img_rgb.shape&#125;&quot;) # [cite: 86]</span><br><span class="line">    </span><br><span class="line">    # æ‰§è¡Œè§£å¯† [cite: 87]</span><br><span class="line">    decrypted_img = zigzag_unscramble_image(img_rgb)</span><br><span class="line">    </span><br><span class="line">    # è½¬å› BGR ä»¥ä¾¿ä¿å­˜ [cite: 88]</span><br><span class="line">    decrypted_bgr = cv2.cvtColor(decrypted_img, cv2.COLOR_RGB2BGR)</span><br><span class="line">    </span><br><span class="line">    # ä¿å­˜ç»“æœ [cite: 89, 90]</span><br><span class="line">    output_path = &quot;decrypted_zigzag.png&quot;</span><br><span class="line">    cv2.imwrite(output_path, decrypted_bgr)</span><br><span class="line">    print(f&quot;å›¾åƒå·²è§£å¯†å¹¶ä¿å­˜ä¸º: &#123;output_path&#125;&quot;) # [cite: 91]</span><br></pre></td></tr></table></figure>



<hr>
<p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ç”±ç™½ç™½æ¯›æ¯›åˆ›ä½œï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>

        </div>
    </article>
</div>

</div>

<script src="/js/main.js?v=1767442695293"></script>
</body>
</html>
